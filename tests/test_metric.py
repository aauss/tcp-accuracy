from textwrap import dedent
from tcp_accuracy import TCPAccuracy

response_1 = dedent("""\
    'We are given a project with three phases:\n\n1. **Develop Stimuli and Decision Protocol** – 1 day  \n2. **Recruit Participants and Conduct Experimental Sessions** – 2 days  \n3. **Analyze Data and Summarize Findings** – 2 days  \n\nConstraints:\n\n- The project starts **next Tuesday** after the conversation on **2012-10-26**.\n- Dr. Vance (the lead) can work **no more than 2 consecutive days**, and must take **at least 2 days off** after every 2-day work block.\n- Ben Carter can also work **no more than 2 consecutive days**, and must take **at least 1 day off** after that (to work on coursework).\n- Dr. Vance is **unavailable on next Saturday** (i.e., 2012-11-02).\n- Tasks must be done in sequence:\n  - Phase 1 → Phase 2 → Phase 3\n- Each task must be completed **before** the next one starts.\n- Only one person can work on a phase at a time.\n\nWe are to find the **earliest date** the project can be **completed**, i.e., when the final phase (data analysis and summarization) ends.\n\n---\n\n### Step 1: Determine the start date\n\nThe conversation is on **2012-10-26**.\n\nNext Tuesday is **2012-11-01**.\n\n✅ So, the project starts on **2012-11-01**.\n\n---\n\n### Step 2: Assign tasks in sequence\n\nWe must assign the phases in order:\n\n1. **Develop Stimuli and Decision Protocol** – 1 day (assigned to either Ben or Dr. Vance)\n2. **Recruit Participants and Conduct Experimental Sessions** – 2 days\n3. **Analyze Data and Summarize Findings** – 2 days\n\nEach person can work only up to 2 consecutive days, and must take a break after.\n\nWe want to **minimize total time**, so we should assign tasks to the person who can work more efficiently or with fewer breaks.\n\nBut both have constraints:\n\n- Dr. Vance: max 2 consecutive days, then **2 days off**.\n- Ben: max 2 consecutive days, then **1 day off**.\n\nAlso, Dr. Vance is **unavailable on 2012-11-02** (next Saturday).\n\n---\n\nLet’s try to assign the phases to minimize delays.\n\nWe have to do:\n\n- Phase 1: 1 day\n- Phase 2: 2 days\n- Phase 3: 2 days\n\nTotal work: 5 days.\n\nWe need to schedule these in sequence, with breaks as needed.\n\nLet’s consider who should do which phase.\n\n---\n\n### Option: Assign Phase 1 to Dr. Vance\n\nPhase 1: Dr. Vance works on **2012-11-01** (Day 1)\n\n→ Done on 2012-11-01\n\nNow, Phase 2: 2 days\n\nDr. Vance cannot work more than 2 consecutive days, and she is unavailable on 2012-11-02.\n\nSo she **cannot work on 2012-11-02**.\n\nTherefore, she **cannot work on both 2012-11-02 and 2012-11-03** (since 2012-11-02 is blocked).\n\nSo she **cannot do Phase 2**.\n\nBen can do Phase 2.\n\nBen can work up to 2 consecutive days, and needs 1 day off after.\n\nSo Ben can work on:\n\n- 2012-11-02 and 2012-11-03 → then must take 1 day off (2012-11-04)\n\nBut Dr. Vance is unavailable on 2012-11-02 → so Ben can work on 2012-11-02 and 2012-11-03.\n\nSo Phase 2: Ben works on **2012-11-02, 2012-11-03**\n\n→ Phase 2 ends on **2012-11-03**\n\nNow, Phase 3: 2 days\n\nWho can do it?\n\nDr. Vance: she worked on 2012-11-01 (1 day), so she has 1 day of work. She can work up to 2 consecutive days, so she can work on 2012-11-04 and 2012-11-05 — **but only if she is available**.\n\nDr. Vance is **unavailable on 2012-11-02**, but **available on 2012-11-04**.\n\nSo she can work on 2012-11-04 and 2012-11-05.\n\nBut she must take **2 days off after 2 consecutive days**.\n\nSo if she works on 2012-11-04 and 2012-11-05, she must take **2 days off** after — i.e., not work on 2012-11-06 or 2012-11-07.\n\nBut we only need 2 days for Phase 3, so that’s fine.\n\nBen: he worked on 2012-11-02–03, so he must take **1 day off** after → so he can work on 2012-11-04? Only if he takes off on 2012-11-04.\n\nWait: Ben can work **only 2 consecutive days**, then must take **1 day off**.\n\nSo if he works on 2012-11-02 and 2012-11-03, he **must take off on 2012-11-04**.\n\nSo he **cannot work on 2012-11-04**.\n\nTherefore, **Ben cannot do Phase 3**.\n\nSo only **Dr. Vance** can do Phase 3.\n\nShe can work on 2012-11-04 and 2012-11-05.\n\nIs she available?\n\n- 2012-11-01: worked (Phase 1)\n- 2012-11-02: unavailable (family reunion)\n- 2012-11-03: not working (Ben is doing Phase 2)\n- 2012-11-04: available\n- 2012-11-05: available\n\nShe worked on 2012-11-01 → that’s only 1 day. So she can work on 2012-11-04 and 2012-11-05 — that’s a new block of 2 days.\n\nShe can do that — no violation of 2-day max, and she only works 2 days in a row.\n\nAfter that, she must take 2 days off — but we don’t need that.\n\nSo Phase 3: Dr. Vance works on **2012-11-04 and 2012-11-05**\n\n✅ Project ends on **2012-11-05**\n\nNow, check if any constraints are violated:\n\n- Dr. Vance:\n  - Worked on 2012-11-01 → 1 day → fine\n  - Worked on 2012-11-04–05 → 2 days → fine\n  - No 3-day work blocks\n  - No work on 2012-11-02 → correct (family reunion)\n  - After 2012-11-04–05, she takes 2 days off — not needed, but allowed\n\n- Ben:\n  - Worked on 2012-11-02–03 → 2 days → fine\n  - Then takes 1 day off → 2012-11-04 → so not working on 2012-11-04 → fine\n\n- Tasks in sequence:\n  - Phase 1: 2012-11-01\n  - Phase 2: 2012-11-02–03\n  - Phase 3: 2012-11-04–05\n\nAll tasks completed in order.\n\nNo overlap.\n\nAll constraints respected.\n\nIs there a way to finish earlier?\n\nLet’s try to assign Phase 1 to **Ben** instead.\n\n---\n\n### Option: Assign Phase 1 to Ben\n\nPhase 1: Ben works on **2012-11-01**\n\n→ Done on 2012-11-01\n\nBen worked 1 day → can work up to 2 consecutive days → so can work on 2012-11-02 and 2012-11-03 → then must take 1 day off (2012-11-04)\n\nPhase 2: 2 days → can be done by Ben or Dr. Vance.\n\nDr. Vance is unavailable on 2012-11-02 → so cannot work on 2012-11-02.\n\nSo Dr. Vance cannot do Phase 2 on 2012-11-02.\n\nSo only Ben can do Phase 2.\n\nBen can work on 2012-11-02 and 2012-11-03 → then must take off on 2012-11-04.\n\nSo Phase 2: 2012-11-02–03\n\n→ Phase 2 ends on 2012-11-03\n\nNow Phase 3: 2 days\n\nBen: worked on 2012-11-01, 2012-11-02, 2012-11-03 → that’s **3 days** in a row → violates his constraint (max 2 consecutive days).\n\nSo Ben **cannot** work on Phase 3.\n\nDr. Vance: available on 2012-11-04 and 2012-11-05 → can work on those.\n\nShe has not worked in a block before → can work on 2012-11-04 and 2012-11-05 → fine.\n\nSo Phase 3: Dr. Vance on 2012-11-04–05\n\n→ Project ends on **2012-11-05**\n\nSame end date.\n\nSo both options lead to **2012-11-05**\n\nCan we do Phase 3 earlier?\n\nOnly if we can start Phase 2 earlier or finish earlier.\n\nBut Phase 1 must start on 2012-11-01.\n\nPhase 2 must start after Phase 1 is done.\n\nPhase 1 is 1 day → so Phase 2 can start on 2012-11-02.\n\nDr. Vance cannot work on 2012-11-02 → so Phase 2 must be done by Ben.\n\nBen can work on 2012-11-02 and 2012-11-03 → that’s the earliest possible.\n\nThen Phase 3 starts on 2012-11-04.\n\nDr. Vance is available from 2012-11-04 onward.\n\nSo Phase 3 must start on 2012-11-04.\n\nShe can work 2 days → ends on 2012-11-05.\n\nNo earlier possibility.\n\nCould we assign Phase 1 to Dr. Vance on 2012-11-01, then Phase 2 to Ben on 2012-11-02–03, then Phase 3 to Dr. Vance on 2012-11-04–05 → same as before.\n\nNo way to skip days.\n\nIs there a way to have Phase 3 start earlier?\n\nOnly if Phase 2 ends earlier — but Phase 2 is 2 days, and must start on 2012-11-02.\n\nSo earliest Phase 2 ends on 2012-11-03.\n\nSo Phase 3 must start on 2012-11-04.\n\nNo earlier.\n\nDr. Vance is unavailable on 2012-11-02 — so no one can work on that day.\n\nSo 2012-11-02 is a **blocked day**.\n\nTherefore, no work can happen on 2012-11-02.\n\nSo Phase 2 cannot start on 2012-11-02 — because that day is blocked.\n\nWait — is that true?\n\nDr. Vance is unavailable on 2012-11-02 — but **Ben** is available.\n\nSo Ben **can** work on 2012-11-02.\n\nSo Phase 2 **can** start on 2012-11-02.\n\nDr. Vance is unavailable — but Ben is available.\n\nSo Ben can work on 2012-11-02 and 2012-11-03.\n\nSo that’s fine.\n\nSo no issue.\n\nBut the **only constraint** is that Dr. Vance cannot work on 2012-11-02.\n\nSo the schedule is valid.\n\nThus, the **earliest possible completion date** is **2012-11-05**.\n\n---\n\n### Final Answer:\n\n\\boxed{2012-11-05}'""")

response_2 = dedent("""\
    'We are given a project with three tasks, dependencies, time estimates, and constraints on availability and breaks for both Sarah and Michael. We need to determine the **earliest date** the project can be **completed**, assuming the project starts **next Thursday** after the conversation on **2020-12-31**.\n\n---\n\n### Step 1: Determine the project start date\n\nThe conversation happens on **2020-12-31**.\n\n"Next Thursday" is **January 7, 2021**.\n\n✅ **Project start date: 2021-01-07**\n\n---\n\n### Step 2: List the tasks with durations and dependencies\n\n| Task | Duration | Dependencies |\n|------|----------|-------------|\n| T1: Review Last Year\'s Marketing Spend | 1 day | None (start first) |\n| T2: Draft Budget Submission Guidelines & Approval Workflow | 2 days | Must wait for T1 to complete |\n| T3: Design & Finalize Excel Budget Proposal Template | 1 day | Must wait for T2 to complete |\n\nSo the **sequence is linear**:\n- T1 → T2 → T3\n\nTotal duration: 1 + 2 + 1 = **4 days** of work, in sequence.\n\nBut we have **person availability constraints** and **break rules**.\n\n---\n\n### Step 3: Understand availability and break rules\n\n#### Sarah:\n- Can only work on **weekdays** (Mon–Fri).\n- Can work **up to 3 consecutive days**, then must take a **2-day break** (for leadership workshop).\n- After the break, she can resume work.\n\n> So Sarah\'s work pattern: max 3 days → 2-day break → can resume.\n\n#### Michael:\n- Can work any day (no weekday restriction).\n- Needs **at least a 2-day break** between any tasks he handles.\n- So if he works on a task, he must take **2 days off** before starting the next task.\n\n> Michael\'s work pattern: task → 2-day break → next task.\n\n---\n\n### Step 4: Assign tasks to people\n\nWe are to assign each task to one person (Sarah or Michael), with the goal of **minimizing total project duration**.\n\nWe want to **complete the project as early as possible**, so we should assign tasks to the person who can work more efficiently given their constraints.\n\nLet’s evaluate both options:\n\n---\n\n## Option 1: Assign tasks to Sarah\n\nSarah does all tasks.\n\n- T1: 1 day → 1 day\n- T2: 2 days → 2 days\n- T3: 1 day → 1 day\n\nTotal work: 4 days\n\nBut Sarah can only work **3 consecutive days**, then must take a **2-day break**.\n\nSo we need to check if she can do 4 days of work without violating her break rule.\n\nShe can work up to 3 days → then 2-day break → then resume.\n\nSo if she works 3 days, then breaks 2 days, then works 1 more day → total work: 4 days, but with a 2-day break in between.\n\nBut the **break must be after 3 consecutive days**.\n\nSo possible schedule:\n\n- Day 1: work\n- Day 2: work\n- Day 3: work\n- Day 4: break\n- Day 5: break\n- Day 6: work (T3)\n\nBut T3 is only 1 day, and T2 is 2 days.\n\nSo we need to assign the 4 days of work in sequence.\n\nCan Sarah do 4 days of work without violating her break rule?\n\nYes, **if** she works 3 days, then takes 2-day break, then works 1 day.\n\nBut the **break must come after 3 consecutive days of work**.\n\nSo the work days must be grouped as:\n\n- Work 3 days → break 2 days → work 1 day\n\nTotal time: 3 + 2 + 1 = 6 days\n\nBut the work is only 4 days, so the break is **not needed** if she can do 3 days and then 1 day without violating the rule.\n\nWait — the rule says: "I can work up to 3 consecutive days, then I\'ll need a 2-day break for the workshop and a breather before diving back in."\n\nSo **after 3 consecutive days**, she must take a 2-day break.\n\nShe **does not** need to take a break after 1 or 2 days.\n\nSo if she works 3 days, then 1 day, that’s **4 days**, but only if the 4th day is **after a 2-day break**.\n\nSo she **cannot** work on day 4 without a 2-day break after day 3.\n\nSo the work sequence must be:\n\n- Days 1–3: work (T1, part of T2)\n- Days 4–5: break\n- Day 6: work (T3)\n\nBut T2 is 2 days — so she needs to do 2 days of T2 after T1.\n\nSo let\'s assign:\n\n- T1: Day 1 (1 day)\n- T2: Days 2–3 (2 days)\n- T3: Day 4 (1 day)\n\nBut after T2 (Day 3), she has only worked 3 days (Day 1–3), so she must take a **2-day break** after Day 3.\n\nSo she **cannot** work on Day 4.\n\nThus, **Sarah cannot do T3 on Day 4**.\n\nShe must take a break after Day 3.\n\nSo T3 must be scheduled **after Day 5** (Day 4 and 5 are break).\n\nSo T3 would be on **Day 6**.\n\nThus, total project duration: **6 days** from start (2021-01-07)\n\nLet’s compute the date:\n\n- Start: 2021-01-07\n- Day 1: 2021-01-07 → T1\n- Day 2: 2021-01-08 → T2\n- Day 3: 2021-01-09 → T2\n- Day 4: 2021-01-10 → break\n- Day 5: 2021-01-11 → break\n- Day 6: 2021-01-12 → T3\n\n✅ T3 completed on **2021-01-12**\n\nBut is this the earliest?\n\n---\n\n## Option 2: Assign tasks to Michael\n\nMichael can work any day, but needs **at least 2-day break between tasks**.\n\nSo if he does a task, he must take 2 days off before starting the next.\n\nTasks:\n\n- T1: 1 day\n- T2: 2 days\n- T3: 1 day\n\nSequence: T1 → T2 → T3\n\nSo:\n\n- T1: 1 day\n- Then 2-day break\n- T2: 2 days\n- Then 2-day break\n- T3: 1 day\n\nTotal time: 1 + 2 + 2 + 2 + 1 = **8 days**\n\nSo:\n\n- Day 1: T1 → 2021-01-07\n- Day 2: break\n- Day 3: break\n- Day 4: T2\n- Day 5: T2\n- Day 6: break\n- Day 7: break\n- Day 8: T3\n\nSo T3 completed on **2021-01-08 + 7 days = 2021-01-14**\n\nWait:\n\n- Start: 2021-01-07\n- T1: 2021-01-07\n- Break: 2021-01-08, 2021-01-09\n- T2: 2021-01-10, 2021-01-11\n- Break: 2021-01-12, 2021-01-13\n- T3: 2021-01-14\n\n✅ T3 completed on **2021-01-14**\n\nThis is **later** than Sarah’s option.\n\nSo **Option 1 (Sarah)** is better.\n\n---\n\n## Option 3: Split tasks between Sarah and Michael\n\nCan we assign tasks to minimize total time?\n\nLet’s try to assign T1 and T3 to Sarah, and T2 to Michael — or other combinations.\n\nWe want to minimize total time, so we should assign tasks to the person who can do them with **fewer breaks**.\n\nSarah has a **3-day work limit**, then 2-day break.\n\nMichael has **2-day breaks between tasks**.\n\nSo if we assign a task to Michael, we must have a 2-day gap between tasks.\n\nIf we assign to Sarah, we can do 3 days, then break, then resume — but only if we exceed 3 days.\n\nBut we can **avoid breaks** if we don’t exceed 3 consecutive days.\n\nSo perhaps we can assign **T1 and T3 to Sarah**, and **T2 to Michael**.\n\nLet’s try that.\n\n---\n\n### Option 3a: T1 → Sarah, T2 → Michael, T3 → Sarah\n\nSequence:\n\n- T1: Sarah → 1 day\n- Then T2: Michael → 2 days\n- Then T3: Sarah → 1 day\n\nBut **Michael** must take a 2-day break between tasks — but he only does one task (T2), so no break needed.\n\nSarah does T1 (1 day), then T3 (1 day) — but only if she can do them without violating her 3-day rule.\n\nCan Sarah do T1 and T3 on separate days?\n\nYes — as long as she doesn’t work more than 3 consecutive days.\n\nSo:\n\n- T1: Day 1 → 2021-01-07\n- Then Michael does T2: Day 2–3 → 2021-01-08, 2021-01-09\n- Then Sarah does T3: Day 4 → 2021-01-10\n\nBut is there a break required?\n\nSarah only works on Day 1 and Day 4.\n\nShe works on Day 1 → then breaks (no requirement to break after 1 day), then works on Day 4.\n\nSo she can do that — no violation.\n\nMichael only does one task → no break needed.\n\nSo total time: T3 on **2021-01-10**\n\nIs that possible?\n\nLet’s check:\n\n- Day 1: 2021-01-07 → Sarah: T1 (1 day)\n- Day 2: 2021-01-08 → Michael: T2 (1 day)\n- Day 3: 2021-01-09 → Michael: T2 (2nd day)\n- Day 4: 2021-01-10 → Sarah: T3 (1 day)\n\n✅ All tasks completed by **2021-01-10**\n\nThis is **much earlier** than Option 1 (which ended on 2021-01-12).\n\nIs this valid?\n\nLet’s verify constraints:\n\n- Sarah: works on Day 1 and Day 4 → only 2 days of work, not consecutive → no 3-day block → no break required → ✅\n- Michael: only works on Days 2–3 → one task → no break needed → ✅\n- Dependencies: T1 must finish before T2 → T1 on Day 1, T2 on Day 2–3 → ✅\n- T2 must finish before T3 → T2 ends Day 3, T3 starts Day 4 → ✅\n- All tasks assigned to one person at a time → ✅\n- Sarah only works on weekdays → all days are weekdays → ✅\n- Michael works any day → ✅\n\nSo this schedule is **valid** and **earlier** than previous options.\n\nCan we do even better?\n\n---\n\n### Option 3b: T1 → Michael, T2 → Sarah, T3 → Michael\n\nTry to assign T1 to Michael, T2 to Sarah, T3 to Michael.\n\nSequence:\n\n- T1: Michael → 1 day\n- Then T2: Sarah → 2 days\n- Then T3: Michael → 1 day\n\nMichael does two tasks: T1 and T3.\n\nHe must take a **2-day break between tasks**.\n\nSo:\n\n- T1: Day 1 → 2021-01-07\n- Then Michael must take 2-day break → Days 2–3\n- T3: Day 4 → 2021-01-10\n\nBut T2 must happen **after T1**, and **before T3**.\n\nSo T2 must be scheduled **after T1**, and **before T3**.\n\nSo T2 must be after Day 1, and before Day 4.\n\nBut Michael is not doing T2 — Sarah is.\n\nSo Sarah does T2: 2 days.\n\nSo:\n\n- Day 1: Michael → T1\n- Days 2–3: break\n- Day 4: Sarah → T2 (1 day)\n- Day 5: Sarah → T2 (2nd day)\n- Days 6–7: break\n- Day 8: Michael → T3\n\nT3 on **2021-01-08 + 7 days = 2021-01-15**\n\nThis is **worse** than previous.\n\nSo not better.\n\n---\n\n### Option 3c: T1 → Sarah, T2 → Sarah, T3 → Michael\n\nT1 and T2 to Sarah → 3 days total (T1:1, T2:2)\n\nSarah works 3 consecutive days → must take 2-day break after.\n\nThen T3 → Michael → 1 day\n\nSo:\n\n- T1: Day 1 → 2021-01-07\n- T2: Days 2–3 → 2021-01-08, 2021-01-09\n- Break: Days 4–5 → 2021-01-10, 2021-01-11\n- T3: Day 6 → 2021-01-12\n\nT3 on **2021-01-12** → worse than Option 3a.\n\n---\n\n### Option 3d: T1 → Michael, T2 → Michael, T3 → Sarah\n\nMichael does T1 and T2 → 1 + 2 = 3 days\n\nMichael must take 2-day break between tasks.\n\nSo:\n\n- T1: Day 1 → 2021-01-07\n- Break: Days 2–3\n- T2: Days 4–5 → 2021-01-10, 2021-01-11\n- Then T3: Sarah → Day 6 → 2021-01-12\n\nT3 on **2021-01-12** → worse.\n\n---\n\n### Option 3e: T1 → Sarah, T2 → Michael, T3 → Michael\n\nT1 → Sarah (1 day)\n\nT2 → Michael (2 days)\n\nT3 → Michael (1 day)\n\nMichael does T2 and T3 → must have 2-day break between.\n\nSo:\n\n- T1: Day 1 → 2021-01-07\n- T2: Days 2–3 → 2021-01-08, 2021-01-09\n- Break: Days 4–5\n- T3: Day 6 → 2021-01-12\n\nAgain, T3 on **2021-01-12** → worse.\n\n---\n\n### Best so far: Option 3a → T1 → Sarah, T2 → Michael, T3 → Sarah\n\n- T1: 2021-01-07\n- T2: 2021-01-08, 2021-01-09\n- T3: 2021-01-10\n\n✅ All constraints satisfied.\n\nIs there a way to do it earlier?\n\nCan we start T2 earlier than Day 2?\n\nNo — T1 must finish before T2.\n\nT1 takes 1 day → must finish by end of Day 1.\n\nSo T2 can start on Day 2.\n\nT3 must start after T2 finishes → so after Day 3.\n\nSo T3 must be on **Day 4 or later**.\n\nSo earliest possible T3 is **Day 4**.\n\nIn Option 3a, T3 is on **Day 4** → 2021-01-10\n\nCan we do T3 on Day 4?\n\nYes — as long as T2 finishes by Day 3.\n\nT2 is 2 days → if it starts on Day 2, ends on Day 3 → perfect.\n\nT1 on Day 1 → ends Day 1 → fine.\n\nSarah does T1 and T3 — not consecutive → no break needed.\n\nMichael does T2 — one task → no break needed.\n\nAll constraints satisfied.\n\nSo **earliest possible completion date is 2021-01-10**\n\nBut wait — is **2021-01-10** a weekday?\n\nYes — Monday to Friday.\n\n2021-01-07: Thursday  \n2021-01-08: Friday  \n2021-01-09: Saturday → ❌\n\nWait! **2021-01-09 is a Saturday**?\n\nLet’s check the calendar.\n\n2021:\n\n- January 1, 2021: Friday\n- January 2: Saturday\n- January 3: Sunday\n- January 4: Monday\n- January 5: Tuesday\n-'""")

response_3 = dedent('''\
    "We are tasked with determining the **realistic completion date and time** of a nutrition app evaluation project, based on:\n\n- A clear sequence of tasks with dependencies.\n- Work hours and breaks for both Dr. Vance (CET) and Mark Olsen (CDT).\n- A start time of **May 28th, 2020, 00:00 GMT**.\n- The project must be completed in **GMT**.\n\n---\n\n### Step 1: Understand the Tasks and Dependencies\n\nThe three tasks are:\n\n1. **Task A**: *Draft Detailed Patient Scenarios (Type 2 Diabetes & Celiac Disease) and Document MyFitnessPal's Core Features*  \n   - Duration: 4 hours  \n   - Assigned to: Dr. Vance  \n   - Can only start at 00:00 GMT (project start)\n\n2. **Task B**: *Document Cronometer's Core Features and Unique Selling Points*  \n   - Duration: 1 hour  \n   - Assigned to: Mark Olsen  \n   - Can start **only after Task A is complete**\n\n3. **Task C**: *Write Comparative Analysis and Final Recommendations*  \n   - Duration: 1 hour  \n   - Assigned to: Dr. Vance  \n   - Can start **only after both Task A and Task B are complete**\n\n> So the dependency chain is:  \n> **Task A → Task B → Task C**\n\n---\n\n### Step 2: Convert Time Zones to GMT\n\nWe are given:\n\n- Dr. Vance: works in **CET** (Central European Time)  \n- Mark Olsen: works in **CDT** (Central Daylight Time)  \n- Project starts at **00:00 GMT, May 28, 2020**\n\nWe need to convert all work times to **GMT**.\n\n#### Time Zone Differences:\n\n- CET = UTC+1  \n- CDT = UTC-4 (CDT is Central Daylight Time, which is UTC-4)\n\nSo:\n\n- CET = GMT +1 → to convert to GMT: **subtract 1 hour**\n- CDT = GMT -4 → to convert to GMT: **add 4 hours**\n\n---\n\n### Step 3: Work Schedules (with breaks)\n\nEach person can work **4 consecutive hours**, then must take **at least 1 hour break**.\n\nThey work only during their working hours (8:00–16:00 CET / 10:00–18:00 CDT), and cannot work outside those hours.\n\nWe must schedule tasks within these constraints.\n\n---\n\n### Step 4: Task A – Dr. Vance (CET)\n\n- Duration: 4 hours  \n- Must start at 00:00 GMT (project start)  \n- Dr. Vance's working hours: 8:00–16:00 CET  \n- Convert 00:00 GMT → CET: **00:00 + 1 = 01:00 CET**  \n  → So she can start at **01:00 CET**, which is **00:00 GMT**\n\nBut she cannot work before 8:00 CET (i.e., 7:00 GMT).  \nSo she **cannot start Task A before 8:00 CET = 7:00 GMT**\n\nTherefore, **Task A must start at 7:00 GMT** (8:00 CET)\n\nShe works 4 hours straight → ends at **7:00 + 4 = 11:00 GMT**\n\nThen she needs a **1-hour break** (from 11:00 to 12:00 GMT)\n\nSo Task A ends at **11:00 GMT**\n\n---\n\n### Step 5: Task B – Mark Olsen (CDT)\n\n- Duration: 1 hour  \n- Can only start **after Task A is complete** → after 11:00 GMT  \n- Mark Olsen's working hours: 10:00–18:00 CDT  \n- Convert 11:00 GMT → CDT: 11:00 - 4 = **07:00 CDT**  \n  → So he can start at 07:00 CDT (which is 11:00 GMT)\n\nHe can work from 10:00 CDT onward.  \nSo he **cannot start before 10:00 CDT = 10:00 + 4 = 14:00 GMT**\n\nTherefore, **Task B must start at 14:00 GMT**\n\nHe works 1 hour → ends at **15:00 GMT**\n\nThen he takes a break (but only 1 hour break is required, and he can do it after).  \nNo further work needed.\n\n---\n\n### Step 6: Task C – Dr. Vance (CET)\n\n- Duration: 1 hour  \n- Can only start **after both Task A and Task B are complete**  \n- Task A ends at 11:00 GMT  \n- Task B ends at 15:00 GMT  \n→ So Task C can start at **15:00 GMT**\n\nDr. Vance's working hours: 8:00–16:00 CET  \nConvert 15:00 GMT → CET: 15:00 + 1 = **16:00 CET**\n\nShe can work until 16:00 CET → so she can work from 16:00 CET onward?  \nBut her working hours end at 16:00 CET → so she **cannot work after 16:00 CET**\n\nTherefore, **she cannot start Task C at 15:00 GMT** because that would be **16:00 CET**, which is the end of her working day.\n\nShe can only work until 16:00 CET → so the **latest she can start** is **15:00 CET = 14:00 GMT**\n\nBut Task C must start **after 15:00 GMT** (when Task B ends)\n\nSo **there is a conflict**.\n\n---\n\n### Conflict: Task C cannot start after 15:00 GMT\n\nDr. Vance can only work until **16:00 CET = 17:00 GMT**\n\nWait — let's double-check:\n\n- 16:00 CET = 16:00 + 1 = **17:00 GMT**\n\nYes! I made a mistake earlier.\n\nDr. Vance works from **8:00 to 16:00 CET**\n\n- 8:00 CET = 7:00 GMT  \n- 16:00 CET = 17:00 GMT\n\nSo she can work until **17:00 GMT**\n\nShe can work **4 hours straight**, then take a break.\n\nBut in Task A, she worked from **7:00 to 11:00 GMT** (4 hours), then took a break until 12:00 GMT.\n\nShe is **not** working during the break.\n\nSo after the break, she can resume work.\n\nBut Task C must start **after Task B ends**, which is **15:00 GMT**\n\nSo she can start Task C at **15:00 GMT**, which is **16:00 CET**\n\nShe can work until **17:00 GMT** (16:00 CET + 1 hour)\n\nSo she can work **1 hour** on Task C from **15:00 to 16:00 GMT**\n\nBut wait — is she available?\n\nShe had a break from 11:00 to 12:00 GMT.\n\nSo from **12:00 GMT onward**, she is free.\n\nShe can work from **12:00 to 17:00 GMT** (5 hours), but only 4 hours at a time.\n\nSo she can work in a block of 4 hours, then take a break.\n\nBut Task C only requires **1 hour**.\n\nSo she can work on Task C **after 15:00 GMT**, as long as she is available.\n\nShe is available from **12:00 GMT onward**.\n\nSo she can start Task C at **15:00 GMT** (16:00 CET), and work for 1 hour until **16:00 GMT**\n\nThat is within her working hours (until 17:00 GMT)\n\nSo **Task C ends at 16:00 GMT**\n\n---\n\n### Final Timeline (in GMT)\n\n| Task | Start | End | Duration |\n|------|------|-----|---------|\n| Task A (Dr. Vance) | 7:00 | 11:00 | 4 hours |\n| Break (Dr. Vance) | 11:00–12:00 | — | 1 hour |\n| Task B (Mark Olsen) | 14:00 | 15:00 | 1 hour |\n| Task C (Dr. Vance) | 15:00 | 16:00 | 1 hour |\n\n> ✅ All tasks completed by **16:00 GMT**\n\n> ✅ All dependencies satisfied  \n> ✅ All work within working hours and break rules  \n> ✅ No overlapping tasks  \n> ✅ No task split or partial work\n\n---\n\n### Final Answer:\n\n$$\n\\boxed{2020-05-28 16:00}\n$$"''')

subsets = ["tcp_long", "tcp_long", "tcp_short"]

references = ["2012-11-05", "2012-11-05", "2020-05-28 16:00 GMT"]


def test_metric():
    metric = TCPAccuracy()
    results = metric.compute(
        predictions=[response_1, response_2, response_3],
        references=references,
        subset=subsets,
        return_average=False,
    )
    assert results["accuracy"] == [1, 0, 1]
    metric = TCPAccuracy()
    results = metric.compute(
        predictions=[response_1, response_2, response_3],
        references=references,
        subset=subsets,
    )
    assert results["accuracy"] == 2/3
